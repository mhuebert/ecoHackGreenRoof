<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.css" />
		 <!--[if lte IE 8]>
		     <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.ie.css" />
		 <![endif]-->
		  <script src="jquery.js"></script>
		  <script src="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.js"></script>
		  <script src="http://maps.google.com/maps/api/js?v=3&sensor=false"></script>
		  <script src="leaflet-google.js"></script>
		  <style>
			  #map { height: 600px; }
			  ul#index {z-index:1000;position:absolute;top:60px;right:0;}
			  ul#index li {
			  	background:white;
			  	padding:10px 15px;
			  	display:inline-block;
			  	width:120px;
			  	border-radius:5px 0 0 5px;
				margin-bottom:10px;
				display:none;
				font-family: "Source Sans Pro", "Helvetica Neue", sans-serif
			  }
			  ul#index li:hover {
			  	cursor: pointer;
			  }
		  </style>

	</head>
	<body>
		<ul id="index">
		 	</ul>
		 <div style="position:relative;" id="map">
		 	
		 </div>
		 <script>
		  	var map = L.map('map').setView([45.506046, -73.559696], 17);
			var ggl = new L.Google()
		  	map.addLayer(ggl)

		  	var baseMaps = {
			    "Google": ggl
			};
			markers = [
				{name: "Fleurissant d'Outremont",lat:45.517158,lon:-73.625997},
				{name: "Habiter Dumoulin", lat:45.543599,lon:-73.621727},
				{name: "Maison de L'Enfance", lat:45.51803,lon:-73.68213},
				{name: "Bombardier", lat:45.476819,lon:-73.730303}
			]
			$.each(markers, function(i, data){
				var marker = new L.Marker(new L.LatLng(data.lat, data.lon));
				map.addLayer(marker);
				// map.setView(new L.LatLng(data.lat, data.lon),17);
				$("#index").append($("<li data-lat="+data.lat+" data-lon='"+data.lon+"' >"+data.name+"</li>"))
			});
			
		  	$("#index li").on("click", function(e){
		  		var lat = parseFloat($(this).attr("data-lat"));
		  		var lon = parseFloat($(this).attr("data-lon"));
		  		map.setView(new L.LatLng(lat, lon),17);
		  		return false;
		  	})
		 //  	L.tileLayer('http://{s}.tile.cloudmade.com/02e852c715de4f3b8df84caf5136256f/997/256/{z}/{x}/{y}.png', {
			//     attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://cloudmade.com">CloudMade</a>',
			//     maxZoom: 18
			// }).addTo(map);

			coldStyle = {
				color: "#559f30"
			}

			hotStyle = {
				color: "#b44744",
		        fillOpacity: 0.5,
		        weight: 0
			}

			$.getJSON('data/ilotschaleur_region06.geojson', function(hotData){
				console.log(hotData.features[0].geometry.coordinates.length)
				// console.log(data)
				var hotZones = L.layerGroup([L.geoJson(hotData, {style:hotStyle})])
				hotZones.addTo(map)
				var overlayMaps = {
				    "hotZones": hotZones
				};
				L.control.layers(baseMaps, overlayMaps).addTo(map)

			});
		  </script>
	</body>
</html>